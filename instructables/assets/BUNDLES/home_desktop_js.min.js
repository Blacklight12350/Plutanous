!function(d){"use strict";function a(e,t){this.$element=d(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,"hover"==this.options.pause&&this.$element.on("mouseenter",d.proxy(this.pause,this)).on("mouseleave",d.proxy(this.cycle,this))}a.prototype={cycle:function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(d.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(e){var t=this.getActiveIndex(),i=this;if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid",function(){i.to(e)}):t==e?this.pause().cycle():this.slide(t<e?"next":"prev",d(this.$items[e]))},pause:function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&d.support.transition.end&&(this.$element.trigger(d.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(e,t){var i,s=this.$element.find(".item.active"),n=t||s[e](),a=this.interval,o="next"==e?"left":"right",l="next"==e?"first":"last",r=this;if(this.sliding=!0,a&&this.pause(),n=n.length?n:this.$element.find(".item")[l](),i=d.Event("slide",{relatedTarget:n[0],direction:o}),!n.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var e=d(r.$indicators.children()[r.getActiveIndex()]);e&&e.addClass("active")})),d.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;n.addClass(e),n[0].offsetWidth,s.addClass(o),n.addClass(o),this.$element.one(d.support.transition.end,function(){n.removeClass([e,o].join(" ")).addClass("active"),s.removeClass(["active",o].join(" ")),r.sliding=!1,setTimeout(function(){r.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;s.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}};var e=d.fn.carousel;d.fn.carousel=function(n){return this.each(function(){var e=d(this),t=e.data("carousel"),i=d.extend({},d.fn.carousel.defaults,"object"==typeof n&&n),s="string"==typeof n?n:i.slide;t||e.data("carousel",t=new a(this,i)),"number"==typeof n?t.to(n):s?t[s]():i.interval&&t.pause().cycle()})},d.fn.carousel.defaults={interval:5e3,pause:"hover"},d.fn.carousel.Constructor=a,d.fn.carousel.noConflict=function(){return d.fn.carousel=e,this},d(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(e){var t,i,s=d(this),n=d(s.attr("data-target")||(t=s.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"")),a=d.extend({},n.data(),s.data());n.carousel(a),(i=s.attr("data-slide-to"))&&n.data("carousel").pause().to(i).cycle(),e.preventDefault()})}(window.jQuery),Ibles.JST["onboarding-modal"]='<div class="modal fade onboarding-modal">\n    <div class="modal-dialog modal-sm">\n        <div class="modal-content">\n            <div class="modal-body">\n                <img class="onboarding-avatar" src="<< avatar >>" alt="<< screenName >>" />\n                <h3>Thanks for signing up << screenName >>!</h3>\n                <p>\n                    Let the community know a little more about you by <a class="complete-profile-link" href="javascript:void(0);">completing your profile</a>,\n                    and find more inspiration by <a class="customize-feed-link" href="javascript:void(0);">customizing your feed</a>.\n                </p>\n                <button class="btn btn-large btn-yellow customize-feed-link" href="javascript:void(0);">Customize Feed</button><br />\n                <a class="finish-later" href="javascript:void(0);">I\'ll do it later >></a>\n            </div>\n            <button type="button" class="close finish-later" aria-hidden="true">&times;</button>\n        </div>\n    </div>\n</div>\n',Ibles.package("Ibles.views"),Ibles.views.HomeView=Backbone.View.fullExtend({events:{"click .home-content-rotator-slide":"handleSlideshowClick"},initialize:function(){this.toggleOnboarding(),this.makeSlideshow()},makeSlideshow:function(){this.carousel=this.$el.find("#home-content-rotator"),this.carousel.carousel()},toggleOnboarding:function(){var e;Ibles.getCookie("onboardModal")&&(e=Ibles.session,new Ibles.views.OnboardingModal({screenName:e.get("screenName"),avatar:e.getAvatarUrl()}).render())},handleSlideshowClick:function(e){e.preventDefault();var t=$(e.target),i=(t.hasClass(".home-content-rotator-slide")?t:t.parents(".home-content-rotator-slide")).attr("data-link");i&&Ibles.locationAssign(i)}}),Ibles.package("Ibles.views"),Ibles.views.OnboardingModal=Ibles.views.BaseModalView.extend({template:_.template(Ibles.JST["onboarding-modal"]),events:{"click .customize-feed-link":"customizeFeed","click .complete-profile-link":"completeProfile","click .finish-later":"finishLater"},removeOnboarding:function(){Ibles.removeCookie("onboardModal")},customizeFeed:function(){this.removeOnboarding(),Ibles.locationAssign(Ibles.reverseUrls.feedOnboardingUrl())},completeProfile:function(){this.removeOnboarding(),Ibles.locationAssign(Ibles.reverseUrls.memberUrl(this.options.screenName))},finishLater:function(){this.removeOnboarding(),this.dismiss()}});