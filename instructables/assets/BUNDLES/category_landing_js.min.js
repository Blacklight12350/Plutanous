!function(c){"use strict";function a(t,e){this.$element=c(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=e,"hover"==this.options.pause&&this.$element.on("mouseenter",c.proxy(this.pause,this)).on("mouseleave",c.proxy(this.cycle,this))}a.prototype={cycle:function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(c.proxy(this.next,this),this.options.interval)),this},getActiveIndex:function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},to:function(t){var e=this.getActiveIndex(),i=this;if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid",function(){i.to(t)}):e==t?this.pause().cycle():this.slide(e<t?"next":"prev",c(this.$items[t]))},pause:function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&c.support.transition.end&&(this.$element.trigger(c.support.transition.end),this.cycle(!0)),clearInterval(this.interval),this.interval=null,this},next:function(){if(!this.sliding)return this.slide("next")},prev:function(){if(!this.sliding)return this.slide("prev")},slide:function(t,e){var i,s=this.$element.find(".item.active"),l=e||s[t](),a=this.interval,n="next"==t?"left":"right",r="next"==t?"first":"last",o=this;if(this.sliding=!0,a&&this.pause(),l=l.length?l:this.$element.find(".item")[r](),i=c.Event("slide",{relatedTarget:l[0],direction:n}),!l.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var t=c(o.$indicators.children()[o.getActiveIndex()]);t&&t.addClass("active")})),c.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(i),i.isDefaultPrevented())return;l.addClass(t),l[0].offsetWidth,s.addClass(n),l.addClass(n),this.$element.one(c.support.transition.end,function(){l.removeClass([t,n].join(" ")).addClass("active"),s.removeClass(["active",n].join(" ")),o.sliding=!1,setTimeout(function(){o.$element.trigger("slid")},0)})}else{if(this.$element.trigger(i),i.isDefaultPrevented())return;s.removeClass("active"),l.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return a&&this.cycle(),this}}};var t=c.fn.carousel;c.fn.carousel=function(l){return this.each(function(){var t=c(this),e=t.data("carousel"),i=c.extend({},c.fn.carousel.defaults,"object"==typeof l&&l),s="string"==typeof l?l:i.slide;e||t.data("carousel",e=new a(this,i)),"number"==typeof l?e.to(l):s?e[s]():i.interval&&e.pause().cycle()})},c.fn.carousel.defaults={interval:5e3,pause:"hover"},c.fn.carousel.Constructor=a,c.fn.carousel.noConflict=function(){return c.fn.carousel=t,this},c(document).on("click.carousel.data-api","[data-slide], [data-slide-to]",function(t){var e,i,s=c(this),l=c(s.attr("data-target")||(e=s.attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")),a=c.extend({},l.data(),s.data());l.carousel(a),(i=s.attr("data-slide-to"))&&l.data("carousel").pause().to(i).cycle(),t.preventDefault()})}(window.jQuery),Ibles.package("Ibles.views"),Ibles.views.ScrollableCardsView=Backbone.View.fullExtend({events:{"click .left-control":"scrollBack","click .right-control":"scrollForward"},initialize:function(){_.bindAll(this,"scroll"),this.$scrollable=this.$(".scrollable-cards-inner"),this.$scrollable.scroll(_.debounce(this.scroll,250))},scrollBack:function(t){var e;t.preventDefault(),$(t.currentTarget).hasClass("active")&&(e=this.$(".carousel-items").scrollLeft(),this.$scrollable.animate({scrollLeft:e-this.$scrollable.width()},800))},scrollForward:function(t){var e;t.preventDefault(),$(t.currentTarget).hasClass("active")&&(e=this.$scrollable.scrollLeft(),this.$scrollable.animate({scrollLeft:e+this.$scrollable.width()},800))},scroll:function(){var t=this.$scrollable,e=this.$(".right-control"),i=this.$(".left-control"),s=t.children(".scrollable-card").last(),l=t.width();0<t.scrollLeft()?i.addClass("active"):i.removeClass("active"),s.position().left+s.width()<=l?e.removeClass("active"):e.addClass("active")}}),Ibles.package("Ibles.views"),Ibles.views.CategoryLandingView=Backbone.View.fullExtend({events:{"click .category-landing-rotator-slide":"handleSlideshowClick"},initialize:function(){this.makeSlideshow(),this.setupScrollableChannels(),this.localizeTimestamps()},makeSlideshow:function(){var t=this;this.carousel=this.$el.find("#carousel-landing-page-rotator"),$(".category-landing-rotator-slide:not(.active) .category-landing-rotator-text").fadeTo("slow",0),this.carousel.on("slid",function(){t.carousel.find(".active .category-landing-rotator-text").fadeTo("slow",1)}),this.carousel.on("slide",function(){t.carousel.find(".active .category-landing-rotator-text").fadeTo("slow",0)}),this.carousel.carousel()},handleSlideshowClick:function(t){var e=$(t.target),i=e.hasClass(".category-landing-rotator-slide")?e:e.parents(".category-landing-rotator-slide");t.preventDefault(),i.data("link")&&Ibles.locationAssign(i.data("link"))},setupScrollableChannels:function(){new Ibles.views.ScrollableCardsView({el:this.$(".category-landing-channels")})},localizeTimestamps:function(){this.$el.find(".topic-meta-text-date").each(function(){var t=$(this),e=t.data("timestamp");t.attr("title",e),t.html(Ibles.serverToBrowserTime(e).fromNow()),t.parents(".topic-meta-text").css("visibility","visible")})}});